[package]
name = "jolt-sdk"
version = "0.1.0"
authors = [
    "Michael Zhu <mzhu@a16z.com>",
    "Sam Ragsdale <sragsdale@a16z.com>",
    "Noah Citron <ncitron@a16z.com>",
    "Andrew Tretyakov <atretyakov@a16z.com>",
    "Markos Georghiades <mgeorghiades@a16z.com>",
]
description = "SDK for Jolt"
license = "MIT"
homepage = "https://github.com/a16z/jolt/README.md"
repository = "https://github.com/a16z/jolt"
edition = "2021"

[features]
default = ["jolt-platform/random"]
host = [
    "jolt-core/default",
    "jolt-platform/std",
    "dep:tracer",
    "dep:common",
    "dep:ark-ec",
    "dep:ark-bn254",
    "postcard/use-std",
    "serde/std",
]
guest-std = [
    "postcard/use-std",
    "jolt-platform/std",
    "jolt-sdk-macros/guest-std",
    "serde/std",
    "dep:zeroos-runtime-musl",
    "dep:linked_list_allocator",
    "dep:zeroos-jolt-platform",
]
guest-verifier = [
    "guest-std",
    "dep:tracer",
    "dep:common",
    "dep:ark-bn254",
    "jolt-core/minimal",
]
malloc-shim = ["jolt-platform/malloc-shim"]

[dependencies]
# Use jolt-platform for non-std (minimal platform support)
jolt-platform.workspace = true
postcard.workspace = true
serde = { version = "1.0", default-features = false, features = ["derive"] }
ark-ec = { workspace = true, default-features = false, optional = true }
ark-bn254 = { workspace = true, default-features = false, optional = true }

jolt-sdk-macros.workspace = true
# Host-only dependencies
common = { workspace = true, optional = true }
jolt-core = { workspace = true, default-features = false, optional = true }
tracer = { workspace = true, optional = true }
rand = { workspace = true, optional = true }

# Guest std boot code dependencies (from ZeroOS) - RISC-V target only
[target.'cfg(target_arch = "riscv64")'.dependencies]
# Use ZeroOS jolt-platform for guest-std (provides __platform_bootstrap, jolt_syscall, etc.)
zeroos-jolt-platform = { package = "jolt-platform", path = "/Users/sdhawan/Work/ZeroOS/platforms/jolt-platform", default-features = false, features = ["os-linux"], optional = true }
zeroos-runtime-musl = { path = "/Users/sdhawan/Work/ZeroOS/crates/zeroos-runtime-musl", optional = true }
linked_list_allocator = { version = "0.10", default-features = false, features = ["use_spin_nightly"], optional = true }

[dev-dependencies]
hex-literal.workspace = true
