# Hash Benchmark

Benchmarks comparing reference and inline hash implementations in Jolt zkVM.

## Running

```bash
cd examples/hash-bench
RUST_LOG=info cargo run --release
```

## Results (Virtual Cycles)

### SHA256

| Size | ref | aligned | stream | unaligned |
|------|-----|---------|--------|-----------|
| 32B | 7,149 | 3,752 | 3,746 | 3,904 |
| 55B | 7,322 | 3,801 | 3,795 | 3,971 |
| 56B | 13,515 | 6,701 | 6,695 | 6,880 |
| 63B | 13,556 | 6,764 | 6,758 | 6,943 |
| 64B | 13,491 | 7,140 | 7,134 | 7,328 |
| 65B | 13,500 | 7,180 | 7,174 | 7,370 |
| 127B | 19,921 | 10,205 | 10,199 | 10,579 |
| 128B | 19,436 | 10,579 | 10,573 | 10,962 |
| 129B | 19,445 | 10,619 | 10,613 | 11,004 |
| 135B | 19,497 | 10,671 | 10,665 | 11,056 |
| 136B | 19,633 | 10,807 | 10,801 | 11,192 |
| 137B | 19,642 | 10,816 | 10,810 | 11,201 |
| 255B | 31,811 | 17,083 | 17,077 | 17,847 |
| 256B | 31,326 | 17,457 | 17,451 | 18,230 |
| 257B | 31,335 | 17,497 | 17,491 | 18,272 |
| 511B | 55,591 | 30,839 | 30,833 | 32,383 |
| 512B | 55,106 | 31,213 | 31,207 | 32,766 |
| 513B | 55,115 | 31,253 | 31,247 | 32,808 |
| 1023B | 103,151 | 58,351 | 58,345 | 61,455 |
| 1024B | 102,666 | 58,725 | 58,719 | 61,838 |
| 1025B | 102,675 | 58,765 | 58,759 | 61,880 |
| 2047B | 198,271 | 113,375 | 113,369 | 119,599 |
| 2048B | 197,786 | 113,749 | 113,743 | 119,982 |
| 2049B | 197,795 | 113,789 | 113,783 | 120,024 |

### Keccak256

| Size | ref | aligned | stream | unaligned |
|------|-----|---------|--------|-----------|
| 32B | 7,554 | 3,660 | 4,071 | 3,808 |
| 55B | 7,747 | 3,844 | 4,135 | 4,010 |
| 56B | 7,560 | 3,675 | 4,077 | 3,850 |
| 63B | 7,749 | 3,849 | 4,137 | 4,024 |
| 64B | 7,562 | 3,680 | 4,079 | 3,864 |
| 65B | 7,697 | 3,704 | 4,087 | 3,888 |
| 127B | 7,872 | 3,889 | 4,262 | 4,136 |
| 128B | 7,687 | 3,720 | 4,077 | 3,976 |
| 129B | 7,695 | 3,744 | 4,085 | 4,000 |
| 135B | 7,749 | 3,894 | 4,119 | 4,150 |
| 136B | 15,826 | 6,930 | 7,486 | 8,350 |
| 137B | 15,962 | 6,987 | 7,525 | 8,408 |
| 255B | 16,058 | 7,221 | 7,619 | 8,889 |
| 256B | 15,871 | 7,052 | 7,668 | 8,729 |
| 257B | 16,113 | 7,076 | 7,676 | 8,753 |
| 511B | 32,618 | 13,885 | 14,549 | 18,395 |
| 512B | 32,431 | 13,716 | 14,491 | 18,235 |
| 513B | 32,566 | 13,740 | 14,499 | 18,259 |
| 1023B | 65,738 | 27,213 | 28,409 | 37,407 |
| 1024B | 65,551 | 27,044 | 28,351 | 37,247 |
| 1025B | 65,686 | 27,068 | 28,359 | 37,271 |
| 2047B | 131,964 | 53,855 | 56,115 | 75,296 |
| 2048B | 131,971 | 53,880 | 56,251 | 75,321 |
| 2049B | 132,107 | 53,905 | 56,260 | 75,346 |

### Blake2b

| Size | ref | aligned | stream | unaligned |
|------|-----|---------|--------|-----------|
| 32B | 4,250 | 1,256 | 1,657 | 1,408 |
| 55B | 4,443 | 1,449 | 1,850 | 1,619 |
| 56B | 4,256 | 1,262 | 1,663 | 1,441 |
| 63B | 4,445 | 1,451 | 1,852 | 1,630 |
| 64B | 4,258 | 1,264 | 1,665 | 1,452 |
| 65B | 4,393 | 1,399 | 1,800 | 1,587 |
| 127B | 4,443 | 1,449 | 1,850 | 1,700 |
| 128B | 4,238 | 1,245 | 1,645 | 1,505 |
| 129B | 8,086 | 2,582 | 3,103 | 2,845 |
| 135B | 8,140 | 2,636 | 3,157 | 2,899 |
| 136B | 8,147 | 2,643 | 3,164 | 2,906 |
| 137B | 8,283 | 2,779 | 3,300 | 3,042 |
| 255B | 8,166 | 2,662 | 3,183 | 3,181 |
| 256B | 7,962 | 2,455 | 2,978 | 2,982 |
| 257B | 11,798 | 3,786 | 4,433 | 4,316 |
| 511B | 15,590 | 5,070 | 5,843 | 6,123 |
| 512B | 15,386 | 4,863 | 5,638 | 5,924 |
| 513B | 19,222 | 6,194 | 7,093 | 7,258 |
| 1023B | 30,438 | 9,886 | 11,163 | 12,007 |
| 1024B | 30,234 | 9,679 | 10,958 | 11,808 |
| 1025B | 34,070 | 11,010 | 12,413 | 13,142 |
| 2047B | 60,134 | 19,518 | 21,803 | 23,775 |
| 2048B | 59,930 | 19,311 | 21,598 | 23,576 |
| 2049B | 63,766 | 20,642 | 23,053 | 24,910 |

### Blake3 (max 64B)

| Size | ref | aligned | stream | unaligned |
|------|-----|---------|--------|-----------|
| 32B | 3,172 | 850 | 1,144 | 843 |
| 55B | 3,356 | 1,034 | 1,444 | 1,027 |
| 56B | 3,187 | 865 | 1,259 | 858 |
| 63B | 3,361 | 1,039 | 1,321 | 1,032 |
| 64B | 3,193 | 870 | 1,114 | 863 |

### Blake3 keyed64

| ref | inline | Speedup |
|-----|--------|---------|
| 3,145 | **661** | **4.8x** |

## Performance Ranking (64B)

1. **Blake3 keyed64**: 661 cycles
2. **Blake3**: 870 cycles
3. **Blake2b**: 1,264 cycles
4. **Keccak256**: 3,680 cycles
5. **SHA256**: 7,140 cycles
